<template>
  <div class="userDetail">
    <h1>ë¹„ë°€ë²ˆí˜¸ ë³€ê²½</h1>
      <div class="init_inner">
        <h3>ë¹„ë°€ë²ˆí˜¸ë¥¼ ì£¼ê¸°ì ìœ¼ë¡œ ë°”ê¾¸ë©´ ê°œì¸ì •ë³´ ë³´ì•ˆì— ë„ì›€ì´ ë©ë‹ˆë‹¤ ğŸ‘</h3>
      <div class="labeldiv">
        <label  for="old" class="text_basic">ê¸°ì¡´ ë¹„ë°€ë²ˆí˜¸</label>
      </div>
      <div>
        <input type="password" id="old" class="input_basic" v-model="old">
      </div>
      <div class="labeldiv">
        <label  for="password1" class="text_basic">ìƒˆ ë¹„ë°€ë²ˆí˜¸</label>
      </div>
      <div>
        <input type="password" id="password1" class="input_basic" v-model="password1">
      </div>
      <div class="labeldiv">
        <label  for="password2" class="text_basic">ë¹„ë°€ë²ˆí˜¸ í™•ì¸</label>
      </div>
      <div class="">
        <input type="password" id="password2" class="input_basic alert" v-model="password2" @input="validation" @keyup.enter="changePassword">
      </div>
      <div>
        {{alertmsg}}
      </div>

      <div class="">
      </div>
      <div class="">
        <button class="btn" @click="changePassword">ë¹„ë°€ë²ˆí˜¸ ë³€ê²½</button>
      </div>    
    </div>
  </div>
</template>

<script>

export default {
  name: 'ChangePasswordView',
  methods: {
    changePassword() {
      if (!this.old) {
        alert('ê¸°ì¡´ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”')
      } else if (!this.password1) {
        alert('ìƒˆë¡œìš´ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”')
      } else if (!this.password2) {
        alert('ë¹„ë°€ë²ˆí˜¸ í™•ì¸ì„ í•´ì£¼ì„¸ìš”.')
      } else {
        const old = this.old
        const password1 = this.password1
        const password2 = this.password2
  
        const payload = {
          old, password1, password2
        }
        this.$store.dispatch('changePassword', payload)
      }
    },
    
    validation() {
      if (this.password2) {
        if (this.password1 != this.password2){
          this.alertmsg = 'ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•Šì•„ìš” ğŸ¤«'
        } else {
          this.alertmsg = 'ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•©ë‹ˆë‹¤ ğŸ˜'
        }
      } else {
        this.alertmsg = ''
      }
    },
  },
  data () {
  return {
    old: null,
    password1: null,
    password2: null,
    alertmsg:null
  }},


}
</script>

<style scoped>
.btn {
  width: 10rem;
  height: 2.5rem;
  margin: 0.5rem;
  background-color: rgb(13, 13, 32);
  color:white;
  border: solid 0px rgb(161, 127, 133);
}
.btn:hover {
  color: rgb(20, 148, 146);
  background-color: rgb(41, 41, 55);
}

.labeldiv {
  margin-bottom: 5px;
}

label {
  font-weight: 500;
}
input {
  margin-bottom: 20px;
  width: 325px;
  height: 40px;
  background-color: rgb(238, 238, 238);
  border : none;
  border-radius: 10px;
  padding-left: 15px;
  font-size: 20px ;
}
</style>
